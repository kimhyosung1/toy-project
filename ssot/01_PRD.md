# PRD (Product Requirements Document)

## 익명 게시판 및 키워드 알림 시스템

### 📋 프로젝트 개요

**프로젝트명**: 익명 게시판 및 키워드 알림 시스템
**버전**: 0.0.1
**작성일**: 2024년
**아키텍처**: MSA (Microservice Architecture)
**기술 스택**: NestJS v11, TypeScript, MySQL, Redis
**런타임**: Node.js v22.12.0 (LTS)

### 🎯 프로젝트 목적

로그인 없이 사용 가능한 익명 게시판 시스템과 특정 키워드에 대한 알림 기능을 제공하는 마이크로서비스 아키텍처 기반 시스템 구축

### 👥 대상 사용자

- 익명으로 의견을 공유하고 싶은 사용자
- 특정 키워드에 관심이 있어 알림을 받고 싶은 사용자
- 게시판 관리자

### 🔧 핵심 기능 요구사항

#### 1. 게시판 기능

**1.1 게시글 관리**

- ✅ 게시글 작성 (제목, 내용, 작성자명, 비밀번호)
- ✅ 게시글 조회 (페이징 지원)
- ✅ 게시글 검색 (제목, 작성자명 기준)
- ✅ 게시글 수정 (비밀번호 인증 필요)
- ✅ 게시글 삭제 (비밀번호 인증 필요)

**1.2 댓글 시스템**

- ✅ 댓글 작성 (내용, 작성자명)
- ✅ 대댓글 작성 (계층형 구조)
- ✅ 댓글 목록 조회 (페이징 지원)

#### 2. 키워드 알림 기능

**2.1 키워드 매칭**

- ✅ 사용자별 키워드 등록 (author, keyword)
- ✅ 게시글/댓글 작성 시 키워드 자동 감지
- ✅ 매칭된 키워드에 대한 알림 큐 생성

**2.2 알림 처리**

- ✅ Redis Queue를 통한 비동기 알림 처리
- ✅ 키워드 매칭 시 notification 서비스로 이벤트 전송

### 🏗️ 시스템 아키텍처

#### 마이크로서비스 구성

1. **Gateway Service** (Port: 3000)

   - API Gateway 역할
   - 외부 요청 라우팅
   - Swagger API 문서 제공

2. **Board Service** (Port: 3020)

   - 게시글/댓글 CRUD
   - 비밀번호 암호화 (bcrypt)
   - 키워드 매칭 감지

3. **Notification Service** (Port: 3030)

   - 알림 큐 관리
   - 키워드 매칭 이벤트 처리

4. **Test2 Service** (Port: 3010)
   - 테스트용 서비스

#### 통신 방식

- **TCP 프로토콜** 기반 마이크로서비스 간 통신
- **Redis Queue** 를 통한 비동기 처리

### 📊 데이터 모델

#### 주요 엔티티

1. **BoardEntity** (tb_board)

   - 게시글 정보 저장
   - 비밀번호 해시 저장

2. **CommentEntity** (tb_comment)

   - 댓글 및 대댓글 저장
   - 계층형 구조 (parent_id)

3. **KeywordNotificationEntity** (tb_keyword_notification)
   - 사용자별 알림 키워드 저장
   - author + keyword 유니크 제약

### 🔒 보안 요구사항

- 게시글 비밀번호 bcrypt 해시 저장
- SQL Injection 방지 (TypeORM 사용)
- XSS 방지 (class-validator 사용)

### 🚀 성능 요구사항

- 게시글 목록 조회 응답시간: < 200ms
- 동시 사용자 100명 지원
- 페이징을 통한 대용량 데이터 처리

### 📈 확장성 고려사항

- 마이크로서비스 아키텍처로 수평 확장 가능
- Redis를 통한 캐싱 및 큐 처리
- 데이터베이스 인덱스 최적화

### 🧪 테스트 요구사항

- 단위 테스트 (Jest)
- E2E 테스트
- API 문서 자동 생성 (Swagger)

### 📋 미구현 기능 (향후 개발 예정)

- 키워드 등록/삭제 API
- 실제 알림 전송 기능 (이메일, 푸시)
- 게시글 조회수 통계
- 파일 첨부 기능
- 사용자 인증 시스템

### 🔍 부족한 정보 (README 분석 결과)

1. **환경 설정**

   - .env 파일 예시만 제공, 실제 환경별 설정 가이드 부족
   - 개발/프로덕션 환경 분리 방안 미명시

2. **API 문서**

   - Swagger UI 경로만 언급, 상세한 API 스펙 문서 부족
   - 에러 코드 및 응답 형식 정의 부족

3. **배포 가이드**

   - 프로덕션 배포 방법 미제공
   - Docker 설정 부족
   - CI/CD 파이프라인 정보 부족

4. **모니터링**

   - 로깅 전략 미정의
   - 헬스체크 외 모니터링 방안 부족
   - 에러 추적 시스템 부재

5. **데이터베이스**
   - 마이그레이션 전략 부족
   - 백업/복구 방안 미정의
   - 인덱스 최적화 가이드 부족
