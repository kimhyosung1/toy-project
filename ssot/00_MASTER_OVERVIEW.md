# ğŸ¯ NestJS ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ìŠ¤ì¼ˆë ˆí†¤ - ë§ˆìŠ¤í„° ê°œìš”

**NestJS v11 ê¸°ë°˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ìŠ¤ì¼ˆë ˆí†¤ í”„ë¡œì íŠ¸**

## ğŸ“‹ í”„ë¡œì íŠ¸ í•µì‹¬ ì •ë³´

### ê¸°ë³¸ ì •ë³´

- **í”„ë¡œì íŠ¸ëª…**: NestJS ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ìŠ¤ì¼ˆë ˆí†¤
- **í”„ë¡œì íŠ¸ ì„±ê²©**: ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ì™„ì„±ë„ ë†’ì€ MSA í…œí”Œë¦¿
- **ë²„ì „**: 0.0.1
- **ì•„í‚¤í…ì²˜**: MSA (Microservice Architecture)
- **ê¸°ìˆ  ìŠ¤íƒ**: NestJS v11, TypeScript v5.1.3, MySQL, Redis
- **ëŸ°íƒ€ì„**: Node.js v22 (LTS)
- **ì»´íŒŒì¼ëŸ¬**: SWC (15.6% ì„±ëŠ¥ í–¥ìƒ)
- **íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €**: pnpm v8

### í•µì‹¬ íŠ¹ì§• (ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤ì¼ˆë ˆí†¤)

- **ğŸš€ ì™„ì „ ìë™í™”ëœ ì‘ë‹µ ê²€ì¦/ë³€í™˜ ì‹œìŠ¤í…œ**: `@CheckResponseWithType` ë°ì½”ë ˆì´í„° ê¸°ë°˜
- **ğŸ›¡ï¸ 3ë‹¨ê³„ ì—ëŸ¬ ë°©ì–´ ì‹œìŠ¤í…œ**: ì•ˆì „í•œ JSON ì§ë ¬í™” ë° ì˜ˆì™¸ ì²˜ë¦¬
- **ğŸ—ï¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜**: Gateway íŒ¨í„´ìœ¼ë¡œ ì„œë¹„ìŠ¤ ë¶„ë¦¬
- **ğŸ³ Docker ì»¨í…Œì´ë„ˆí™”**: ì¼ê´€ëœ ê°œë°œ/ìš´ì˜ í™˜ê²½
- **âš¡ ê³ ì„±ëŠ¥ ìµœì í™”**: SWC ì»´íŒŒì¼ëŸ¬ + pnpm v8
- **ğŸ“Š Enhanced DB Sync System**: ì™„ì „ ìë™í™”ëœ Entity/Repository ìƒì„±
- **ğŸ¯ í”„ë¡œë•ì…˜ ë ˆë””**: ê¸°ëŠ¥ë§Œ ì¶”ê°€í•˜ë©´ ë°”ë¡œ ìš´ì˜ í™˜ê²½ ë°°í¬ ê°€ëŠ¥

## ğŸ›ï¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ êµ¬ì¡°

### í˜„ì¬ ìš´ì˜ ì¤‘ì¸ ì„œë¹„ìŠ¤ (4ê°œ)

| ì„œë¹„ìŠ¤           | í¬íŠ¸ | ì—­í•                              | ìƒíƒœ    |
| ---------------- | ---- | -------------------------------- | ------- |
| **Gateway**      | 3000 | API Gateway, HTTP â†’ TCP í”„ë¡ì‹œ   | âœ… ìš´ì˜ |
| **Board**        | 3001 | ê²Œì‹œê¸€/ëŒ“ê¸€ CRUD, ë¹„ë°€ë²ˆí˜¸ ì¸ì¦  | âœ… ìš´ì˜ |
| **Notification** | 3002 | ì•Œë¦¼ ì²˜ë¦¬ (Slack, Sentry, Email) | âœ… ìš´ì˜ |
| **Scheduler**    | 3004 | ìŠ¤ì¼€ì¤„ë§, Cron ì‘ì—…              | âœ… ìš´ì˜ |

### ğŸ”§ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì¶”ê°€ íŒ¨í„´

**í¬íŠ¸ í• ë‹¹ ê·œì¹™**: 3000ë²ˆëŒ€ ìˆœì°¨ í• ë‹¹ (3005, 3006, 3007...)
**ì„œë¹„ìŠ¤ëª… ê·œì¹™**: PascalCase (ì˜ˆ: AuthService, FileService)
**ì»¨í…Œì´ë„ˆëª… ê·œì¹™**: lowercase (ì˜ˆ: auth, file)

**ìƒˆ ì„œë¹„ìŠ¤ ì¶”ê°€ ì‹œ ì—…ë°ì´íŠ¸í•  ë¬¸ì„œë“¤**:

1. `00_MASTER_OVERVIEW.md` - ì„œë¹„ìŠ¤ ëª©ë¡ ì¶”ê°€
2. `02_System_Architecture.md` - ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ ì—…ë°ì´íŠ¸
3. `03_Database_Schema.md` - ìƒˆ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ì¶”ê°€ (í•„ìš”ì‹œ)
4. `04_API_Interface.md` - ìƒˆ API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
5. `07_Docker_Configuration.md` - ìƒˆ ì»¨í…Œì´ë„ˆ ì„¤ì • ì¶”ê°€

> **ì°¸ê³ **: ì‹œìŠ¤í…œ ë‹¨ìˆœí™”ë¥¼ ìœ„í•´ ë¶ˆí•„ìš”í•œ í…ŒìŠ¤íŠ¸ ì„œë¹„ìŠ¤ë“¤ì€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. (ì¼ë¶€ ë ˆê±°ì‹œ ì½”ë“œëŠ” í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€)

## ğŸŒ API êµ¬ì¡°

### ì‹œìŠ¤í…œ API

- `GET /health-check` - Gateway í—¬ìŠ¤ì²´í¬
- `GET /health` - ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
- `GET /api-docs` - Swagger API ë¬¸ì„œ â­

### ê²Œì‹œíŒ API

- `POST /boards` - ê²Œì‹œê¸€ ì‘ì„±
- `GET /boards` - ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•, ê²€ìƒ‰)
- `PUT /boards/:id` - ê²Œì‹œê¸€ ìˆ˜ì • (ë¹„ë°€ë²ˆí˜¸ ì¸ì¦)
- `DELETE /boards/:id` - ê²Œì‹œê¸€ ì‚­ì œ (ë¹„ë°€ë²ˆí˜¸ ì¸ì¦)

### ëŒ“ê¸€ API

- `POST /boards/:id/comments` - ëŒ“ê¸€/ëŒ€ëŒ“ê¸€ ì‘ì„±
- `GET /boards/:id/comments` - ëŒ“ê¸€ ëª©ë¡ ì¡°íšŒ (ê³„ì¸µí˜•)

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”

**í˜„ì¬ í™œì„± í…Œì´ë¸”** (4ê°œ):

- `tb_board` - ê²Œì‹œê¸€ (ì œëª©, ë‚´ìš©, ì‘ì„±ì, ë¹„ë°€ë²ˆí˜¸)
- `tb_comment` - ëŒ“ê¸€ (ê³„ì¸µí˜• êµ¬ì¡°, ìê¸°ì°¸ì¡°)
- `tb_user` - ì‚¬ìš©ì ì •ë³´ (ê¸°ë³¸ êµ¬ì¡° ì¤€ë¹„ë¨)
- `tb_test1` - í…ŒìŠ¤íŠ¸ìš© í…Œì´ë¸”

**ê¸°íƒ€**: ì¶”ê°€ ì—”í‹°í‹° íŒŒì¼ë“¤ ì¡´ì¬í•˜ì§€ë§Œ í˜„ì¬ ë¹„í™œì„±í™” ìƒíƒœ

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### Dockerë¡œ ì‹¤í–‰ (ê¶Œì¥)

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/kimhyosung1/toy-project.git
cd toy-project

# 2. ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
chmod +x docker.sh

# 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ
pnpm run build:all:swc

# 4. Dockerë¡œ ì „ì²´ ì‹œìŠ¤í…œ ì‹œì‘
./docker.sh dev up -d

# 5. ìƒíƒœ í™•ì¸
./docker.sh dev ps
```

### ë¡œì»¬ ê°œë°œ í™˜ê²½

```bash
# 1. ì˜ì¡´ì„± ì„¤ì¹˜
pnpm install

# 2. ê° ì„œë¹„ìŠ¤ë¥¼ ê°œë³„ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰
pnpm run start:dev:gateway      # í„°ë¯¸ë„ 1
pnpm run start:dev:board        # í„°ë¯¸ë„ 2
pnpm run start:dev:notification # í„°ë¯¸ë„ 3
pnpm run start:dev:scheduler    # í„°ë¯¸ë„ 4
```

### ì„œë¹„ìŠ¤ í™•ì¸

- **Gateway API**: http://localhost:3000
- **Swagger ë¬¸ì„œ**: http://localhost:3000/api-docs â­ ("NestJS ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ìŠ¤ì¼ˆë ˆí†¤ API")
- **í—¬ìŠ¤ì²´í¬**: http://localhost:3000/health-check

## ğŸ“š SSOT ë¬¸ì„œ êµ¬ì¡°

### ğŸ”§ í•µì‹¬ ì‹œìŠ¤í…œ

- **[01_PRD.md](./01_PRD.md)** - í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ ë° ê¸°ëŠ¥ ëª…ì„¸
- **[02_System_Architecture.md](./02_System_Architecture.md)** - ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ êµ¬ì¡° ë° ì„¤ê³„ ì›ì¹™

### ğŸŒ API ë° ë°ì´í„°

- **[03_Database_Schema.md](./03_Database_Schema.md)** - í…Œì´ë¸” êµ¬ì¡° ë° ê´€ê³„ë„
- **[04_API_Interface.md](./04_API_Interface.md)** - REST API ëª…ì„¸ì„œ ë° ì‚¬ìš©ë²•

### ğŸš€ ê°œë°œ ë° ë°°í¬

- **[05_Package_Management.md](./05_Package_Management.md)** - pnpm ë° ì˜ì¡´ì„± ê´€ë¦¬
- **[06_SWC_Build_System.md](./06_SWC_Build_System.md)** - ê³ ì„±ëŠ¥ ë¹Œë“œ ì„¤ì •
- **[07_Docker_Configuration.md](./07_Docker_Configuration.md)** - ì»¨í…Œì´ë„ˆí™” ë° ë°°í¬ ê°€ì´ë“œ
- **[08_Database_Management.md](./08_Database_Management.md)** - ìë™í™”ëœ DB ë™ê¸°í™” ì‹œìŠ¤í…œ

## ğŸ”§ ì£¼ìš” ê¸°ëŠ¥

### ìë™í™”ëœ ì‘ë‹µ ì‹œìŠ¤í…œ

```typescript
@MessagePattern(CustomMessagePatterns.CreateBoard)
@CheckResponseWithType(CreateBoardResponse) // ğŸ‘ˆ ìë™ ë³€í™˜ í™œì„±í™”
async createBoard(@Payload() input: CreateBoardRequest): Promise<CreateBoardResponse> {
  return this.boardService.createBoard(input);
}
```

### 3ë‹¨ê³„ ì—ëŸ¬ ë°©ì–´

1. **ResponseTransformInterceptor**: ìë™ íƒ€ì… ë³€í™˜ ë° ê²€ì¦
2. **AllExceptionFilter**: ëª¨ë“  ì˜ˆì™¸ì˜ ìµœì¢… ì²˜ë¦¬
3. **UtilityService**: ì•ˆì „í•œ JSON ì§ë ¬í™”

### Enhanced DB Sync System

```bash
# ê°œë°œ í™˜ê²½ì—ì„œ DB ìŠ¤í‚¤ë§ˆ ë™ê¸°í™”
./scripts/run-enhanced-db-sync.sh dev
```

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### SWC ì»´íŒŒì¼ëŸ¬

- **ë¹Œë“œ ì„±ëŠ¥**: 15.6% í–¥ìƒ (1710ms vs 2027ms)
- **ê°œë°œ ì„œë²„**: 483ms ì´ˆê³ ì† ë¹Œë“œ
- **ìë™ ì ìš©**: ëª¨ë“  ê°œë°œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ SWC ì‚¬ìš©

### pnpm íŒ¨í‚¤ì§€ ê´€ë¦¬

- **ë¹ ë¥¸ ì„¤ì¹˜**: npm/yarn ëŒ€ë¹„ 2-3ë°° ë¹ ë¥¸ ì†ë„
- **ë””ìŠ¤í¬ ì ˆì•½**: ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ í†µí•œ ì¤‘ë³µ ì œê±°
- **íš¨ìœ¨ì  ìºì‹œ**: ê¸€ë¡œë²Œ ì €ì¥ì†Œ í™œìš©

## ğŸ”’ ë³´ì•ˆ ê¸°ëŠ¥

### ì…ë ¥ ë°ì´í„° ë³´ì•ˆ

- **class-validator**: ìë™ ìœ íš¨ì„± ê²€ì¦
- **SQL Injection ë°©ì§€**: TypeORM ì‚¬ìš©
- **XSS ë°©ì§€**: ì…ë ¥ ë°ì´í„° ì´ìŠ¤ì¼€ì´í”„

### ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ

- **bcrypt í•´ì‹œ**: ë‹¨ë°©í–¥ ì•”í˜¸í™”
- **ì‘ë‹µ ì œì™¸**: `@Expose()` ì—†ëŠ” í•„ë“œ ìë™ ì œì™¸
- **salt ìë™ ìƒì„±**: ë ˆì¸ë³´ìš° í…Œì´ë¸” ê³µê²© ë°©ì§€

## ğŸ› ï¸ ê°œë°œ ëª…ë ¹ì–´

### ê°œë°œ ì„œë²„ (SWC ìë™ ì ìš©)

```bash
pnpm run start:dev:gateway      # Gateway ì„œë¹„ìŠ¤
pnpm run start:dev:board        # Board ì„œë¹„ìŠ¤
pnpm run start:dev:notification # Notification ì„œë¹„ìŠ¤
pnpm run start:dev:scheduler    # Scheduler ì„œë¹„ìŠ¤
```

### ë¹Œë“œ

```bash
pnpm run build:all:swc          # ëª¨ë“  ì•± SWC ë¹Œë“œ (ê¶Œì¥)
pnpm run build:all              # ëª¨ë“  ì•± ê¸°ì¡´ ë¹Œë“œ
```

### Docker ê´€ë¦¬

```bash
./docker.sh dev up -d           # ê°œë°œ í™˜ê²½ ì‹œì‘
./docker.sh dev logs gateway    # ë¡œê·¸ í™•ì¸
./docker.sh dev down            # ì„œë¹„ìŠ¤ ì¤‘ì§€
```

### í…ŒìŠ¤íŠ¸

```bash
pnpm test                       # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
pnpm test:e2e                   # E2E í…ŒìŠ¤íŠ¸
pnpm test:cov                   # ì»¤ë²„ë¦¬ì§€ í…ŒìŠ¤íŠ¸
```

## ğŸ¯ í˜„ì¬ êµ¬í˜„ ìƒíƒœ

### ì™„ë£Œëœ í•µì‹¬ ê¸°ëŠ¥

- **âœ… ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜**: 4ê°œ ì„œë¹„ìŠ¤ ìš´ì˜ ì¤‘
- **âœ… ìë™í™”ëœ ì‘ë‹µ ì‹œìŠ¤í…œ**: `@CheckResponseWithType` ë°ì½”ë ˆì´í„°
- **âœ… Docker ì»¨í…Œì´ë„ˆí™”**: ì™„ì „í•œ ê°œë°œ/ìš´ì˜ í™˜ê²½
- **âœ… ê²Œì‹œíŒ ì‹œìŠ¤í…œ**: CRUD + ëŒ“ê¸€ ê¸°ëŠ¥
- **âœ… ì•Œë¦¼ ì‹œìŠ¤í…œ**: í‚¤ì›Œë“œ ê¸°ë°˜ ì•Œë¦¼ ì²˜ë¦¬
- **âœ… ìŠ¤ì¼€ì¤„ë§**: Cron ê¸°ë°˜ ë°°ì¹˜ ì‘ì—…

---

**Made with â¤ï¸ using NestJS v11, Node.js v22, Docker, and pnpm v8**

> ğŸ“š **ë” ìì„¸í•œ ì •ë³´**: ê° SSOT ë¬¸ì„œì—ì„œ ìƒì„¸í•œ ê¸°ìˆ  ë¬¸ì„œë¥¼ í™•ì¸í•˜ì„¸ìš”.
